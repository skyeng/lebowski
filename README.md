# –õ–µ–±–æ–≤—Å–∫–∏\*

> _*–ù–∞–∑–≤–∞–Ω–∏–µ –≤—ã–º—ã—à–ª–µ–Ω–æ –∏ –ª—é–±—ã–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è —Å–ª—É—á–∞–π–Ω—ã üôÇ_

–ë–æ—Ç –¥–ª—è –≤–µ–¥–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≤ —Ö–µ–ª–ø–¥–µ—Å–∫-–∫–∞–Ω–∞–ª–∞—Ö –≤ Slack

## –§–∏—á–∏
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ Google Sheets
- –ë–∞–∑–æ–≤—ã–π –≤–æ—Ä–∫–ª–æ–≥-–º–µ–Ω–µ–¥–∂–µ—Ä
- –ü–æ–¥—Å—á–µ—Ç AFRT –∏ ACRT
- –ú–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω –≤ Heroku

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞
1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä Node.js (–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ –ø–æ—Å–ª–µ–¥–Ω—é—é LTS-–≤–µ—Ä—Å–∏—é) –∏ Yarn
2. `git clone https://github.com/skyeng/lebowski.git`
3. `cd lebowski && yarn install`
4. –°–æ–∑–¥–∞–π—Ç–µ –∫–æ–ø–∏—é [—ç—Ç–æ–≥–æ](https://docs.google.com/spreadsheets/d/15NmxG28Bqi5dXiegEnXSUD7O0dWk4jHnW6oSRZ7wECg/edit?usp=sharing) Google Sheet –≤ —Å–≤–æ–µ–º Google Drive
5. –í `config/projects.js` –∑–∞–º–µ–Ω–∏—Ç–µ –∞–π–¥–∏ —Ç–∞–±–ª–∏—Ü—ã –Ω–∞ –∞–π–¥–∏ –≤–∞—à–µ–π —Ç–∞–±–ª–∏—Ü—ã (–µ—Å—Ç—å –≤ —Å—Å—ã–ª–∫–µ –Ω–∞ —Ç–∞–±–ª–∏—Ü—É) –∏ –∞–π–¥–∏ –∫–∞–Ω–∞–ª–∞ –Ω–∞ —Ç–æ—Ç, –≤ –∫–æ—Ç–æ—Ä–æ–º –≤—ã —Ö–æ—Ç–∏—Ç–µ —Å–æ–±–∏—Ä–∞—Ç—å –æ–±—Ä–∞—â–µ–Ω–∏—è ([–∫–∞–∫ —É–∑–Ω–∞—Ç—å –∞–π–¥–∏ –∫–∞–Ω–∞–ª–∞](https://stackoverflow.com/questions/40940327/what-is-the-simplest-way-to-find-a-slack-team-id-and-a-channel-id))
6. –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ API-–∫–ª—é—á –¥–ª—è Google Sheets
7. –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ API-–∫–ª—é—á –¥–ª—è Slack
8. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `config/secrets.js` —Å —Ç–∞–∫–∏–º —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ–º
    ```js
    module.exports = {
      slack: {
        signingSecret: '–≤—Å—Ç–∞–≤—å—Ç–µ —Å—é–¥–∞ signing secret',
        token: '–≤—Å—Ç–∞–≤—å—Ç–µ —Å—é–¥–∞ api —Ç–æ–∫–µ–Ω',
      },
      google: {}, // –ó–∞–º–µ–Ω–∏—Ç–µ {} –Ω–∞ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ json-—Ñ–∞–ª–∞ –ø–æ–ª—É—á–µ–Ω–Ω–æ–≥–æ –æ—Ç Google
    };
    ```
9. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞ —Å –ø–æ–º–æ—â—å—é `yarn start`
10. –í API-–∫–æ–Ω—Å–æ–ª–∏ Slack –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ –≤–æ –≤–∫–ª–∞–¥–∫–µ Event Subscriptions –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —ç—Ç–∏ –¥–µ–π—Å—Ç–≤–∏—è
    - –í–∫–ª—é—á–∏—Ç–µ Events
    - –í Subscribe to bot events –¥–æ–±–∞–≤—å—Ç–µ –∏–≤–µ–Ω—Ç—ã
        - `message.channels`
        - `reaction_added`
    - –í Request URL –Ω–∞–ø–∏—à–∏—Ç–µ `http://{–∞–¥—Ä–µ—Å –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞}:5000/slack/events`
11. –í API-–∫–æ–Ω—Å–æ–ª–∏ Slack –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ –≤–æ –≤–∫–ª–∞–¥–∫–µ Interactivity & Shortcuts –≤–∫–ª—é—á–∏—Ç–µ Interactivity –∏ –≤ Request URL –Ω–∞–ø–∏—à–∏—Ç–µ `http://{–∞–¥—Ä–µ—Å –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞}:5000/slack/action`
12. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ
13. –î–æ–±–∞–≤—å—Ç–µ –±–æ—Ç–∞ –≤ –∫–∞–Ω–∞–ª
14. –í—ã –≤–µ–ª–∏–∫–æ–ª–µ–ø–Ω—ã! –¢–µ–ø–µ—Ä—å –±–æ—Ç –¥–æ–ª–∂–µ–Ω –æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —Ç—Ä–µ–¥–µ

## –°–æ–∑–¥–∞–Ω–∏–µ API-–∫–ª—é—á–∞ –¥–ª—è Google Sheets
1. –ò–¥–∏—Ç–µ –≤ [Google Developer Console](https://console.developers.google.com/project)
2. –í—ã–±–µ—Ä–∏—Ç–µ –∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç
3. –í–∫–ª—é—á–∏—Ç–µ –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ Drive API –∏ Google Sheets API
    - –í –±–æ–∫–æ–≤–æ–º –º–µ–Ω—é –≤—ã–±–µ—Ä–∏—Ç–µ APIs&Auth > APIs
    - –ù–∞–π–¥–∏—Ç–µ —Ç–∞–º Drive API –∏ –Ω–∞–∂–º–∏—Ç–µ –Ω–∞ –Ω–µ–≥–æ
    - –ù–∞–∂–º–∏—Ç–µ –Ω–∞ Enable API
    - –ü–æ–≤—Ç–æ—Ä–∏—Ç–µ —ç—Ç–∏ —Ç—Ä–∏ —à–∞–≥–∞ –¥–ª—è Google Sheets API
4. –°–≥–µ–Ω–µ—Ä–∏—Ç–µ JSON –∫–ª—é—á
    - –í –±–æ–∫–æ–≤–æ–º –º–µ–Ω—é –≤—ã–±–µ—Ä–∏—Ç–µ APIs & auth > Credentials
    - –ù–∞–∂–º–∏—Ç–µ –Ω–∞ Add credentials
    - –í—ã–±–µ—Ä–∏—Ç–µ Service account
    - –ï—Å–ª–∏ —Å–ø—Ä–æ—Å—è—Ç —Ç–∏–ø, –≤—ã–±–µ—Ä–∏—Ç–µ JSON
    - –ù–∞–∂–º–∏—Ç–µ –Ω–∞ Create
    - –û—Ç–∫—Ä–æ–π—Ç–µ —Å–∫–∞—á–∞–Ω–Ω—ã–π —Ñ–∞–π–ª –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ, –Ω–∞–π–¥–∏—Ç–µ —Ç–∞–º –µ–º–µ–π–ª –∞–∫–∫–∞—É–Ω—Ç–∞ –∏ –¥–∞–π —ç—Ç–æ–º—É –µ–º–µ–π–ª—É write-–¥–æ—Å—Ç—É–ø –≤ –≥—É–≥–ª-—Ç–∞–±–ª–∏—Ü–µ, –∫–æ—Ç–æ—Ä—É—é –≤—ã —Å–æ–∑–¥–∞–ª–∏ —Ä–∞–Ω–µ–µ –≤ —à–∞–≥–µ 4 –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ


## –°–æ–∑–¥–∞–Ω–∏–µ API-–∫–ª—é—á–∞ –¥–ª—è Slack
1. –ó–∞–π–¥–∏—Ç–µ –≤ [Slack API Console](https://api.slack.com/apps)
2. –ù–∞–∂–º–∏—Ç–µ Create new app
3. –ù–∞–∑–æ–≤–∏—Ç–µ –µ–µ –õ–µ–±–æ–≤—Å–∫–∏ –∏–ª–∏ –∫–∞–∫-–Ω–∏–±—É–¥—å –µ—â–µ
4. –í Development Slack Workspace –≤—ã–±–µ—Ä–∏—Ç–µ –≤–æ—Ä–∫—Å–ø–µ–π—Å –≥–¥–µ –±—É–¥–µ—Ç–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –±–æ—Ç–∞
5. –í OAuth & Permissions -> Scopes -> Bot Token Scopes –¥–æ–±–∞–≤—å—Ç–µ –µ–º—É —ç—Ç–∏ Scopes
    - `channels:history`
    - `chat:write`
    - `chat:write.customize`
    - `chat:write.public`
    - `reactions:read`
    - `usergroups:read`
    - `users.profile:read`
    - `users:read`
6. –í OAuth & Permissions –Ω–∞–∂–º–∏—Ç–µ `Install to Workspace`
7. –ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —É –≤–∞—Å —Ä—è–¥–æ–º —Å —ç—Ç–æ–π –∫–Ω–æ–ø–∫–æ–π –ø–æ—è–≤–∏—Ç—Å—è –≤–∞—à API-—Ç–æ–∫–µ–Ω, –∞ –≤ Basic Information –≤—ã –º–æ–∂–µ—Ç–µ –Ω–∞–π—Ç–∏ Signing Secret
8. –í–µ—Ä–Ω–∏—Ç–µ—Å—å –∫ –ø—É–Ω–∫—Ç—É 5 –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ